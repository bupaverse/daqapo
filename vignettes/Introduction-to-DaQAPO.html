<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Niels Martin and Greg Van Houdt, Hasselt University, Research group Business Informatics" />

<meta name="date" content="2020-03-30" />

<title>Introduction to DaQAPO</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Introduction to DaQAPO</h1>
<h4 class="author">Niels Martin and Greg Van Houdt, Hasselt University, Research group Business Informatics</h4>
<h4 class="date">2020-03-30</h4>



<p>Process mining techniques generate valuable insights in business processes using automatically generated process execution data. However, despite the extensive opportunities that process mining techniques provide, the garbage in - garbage out principle still applies. Data quality issues are widespread in real-life data and can generate misleading results when used for analysis purposes. Currently, there is no systematic way to perform data quality assessment on process-oriented data. To fill this gap, we introduce DaQAPO - Data Quality Assessment for Process-Oriented data. It provides a set of assessment functions to identify a wide array of quality issues.</p>
<p>We identify two stages in the data quality assessment process:</p>
<ol style="list-style-type: decimal">
<li>Reading and preparing data;</li>
<li>Assessing the data quality - running quality tests.</li>
</ol>
<p>If the user desires to remove anomalies detected by quality tests, he has the ability to do so.</p>
<p>Besides reading through this vignette, you can also run an interactive demo of <code>DaQAPO</code> in <a href="https://swirlstats.com/">Swirl</a>. Download the course from <a href="https://github.com/nielsmartin/Introduction_to_DaQAPO">Github</a>.</p>
<div id="data-sources" class="section level2">
<h2>Data Sources</h2>
<p>Before we can perform the first stage - reading data - we must have access to the appropriate data sources and have knowledge of the expected data structure. Our package supports two input data formats:</p>
<ul>
<li><strong>An activity log</strong>: each line in the log represents an activity instance, i.e. the execution of an activity for a specific case (e.g. a client, a patient, a file,…) by a specific resource. Hence, an activity instance has a duration.</li>
<li><strong>An event log</strong>: each line in the log represents an event recorded for a specific activity instance, expressing for instance its start or its completion. Therefore, an event has no duration.</li>
</ul>
<p>Two example datasets are included in <code>daqapo</code>. These are <code>hospital</code> and <code>hospital_events</code>. Below, you can find their respective structures.</p>
<pre><code>#&gt; Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    53 obs. of  7 variables:
#&gt;  $ patient_visit_nr: num  510 512 510 512 512 510 517 518 518 518 ...
#&gt;  $ activity        : chr  &quot;registration&quot; &quot;Registration&quot; &quot;Triage&quot; &quot;Triage&quot; ...
#&gt;  $ originator      : chr  &quot;Clerk 9&quot; &quot;Clerk 12&quot; &quot;Nurse 27&quot; &quot;Nurse 27&quot; ...
#&gt;  $ start_ts        : chr  &quot;20/11/2017 10:18:17&quot; &quot;20/11/2017 10:33:14&quot; &quot;20/11/2017 10:34:08&quot; &quot;20/11/2017 10:44:12&quot; ...
#&gt;  $ complete_ts     : chr  &quot;20/11/2017 10:20:06&quot; &quot;20/11/2017 10:37:00&quot; &quot;20/11/2017 10:41:48&quot; &quot;20/11/2017 10:50:17&quot; ...
#&gt;  $ triagecode      : num  3 3 3 3 3 NA 3 4 4 4 ...
#&gt;  $ specialization  : chr  &quot;TRAU&quot; &quot;URG&quot; &quot;TRAU&quot; &quot;URG&quot; ...</code></pre>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">str</span>(hospital_events)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="co">#&gt; Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    106 obs. of  8 variables:</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">#&gt;  $ patient_visit_nr     : num  510 510 510 510 510 510 512 512 512 512 ...</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">#&gt;  $ activity             : chr  &quot;registration&quot; &quot;registration&quot; &quot;Triage&quot; &quot;Triage&quot; ...</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">#&gt;  $ originator           : chr  &quot;Clerk 9&quot; &quot;Clerk 9&quot; &quot;Nurse 27&quot; &quot;Nurse 27&quot; ...</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt;  $ event_lifecycle_state: chr  &quot;start&quot; &quot;complete&quot; &quot;start&quot; &quot;complete&quot; ...</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">#&gt;  $ timestamp            : chr  &quot;20/11/2017 10:18:17&quot; &quot;20/11/2017 10:20:06&quot; &quot;20/11/2017 10:34:08&quot; &quot;20/11/2017 10:41:48&quot; ...</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">#&gt;  $ triagecode           : num  3 3 3 3 NA NA 3 3 3 3 ...</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="co">#&gt;  $ specialization       : chr  &quot;TRAU&quot; &quot;TRAU&quot; &quot;TRAU&quot; &quot;TRAU&quot; ...</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="co">#&gt;  $ event_matching       : num  1 1 1 1 1 1 1 1 1 1 ...</span></a></code></pre></div>
<p>Both datasets were artificially created merely to illustrate the package’s functionalities.</p>
</div>
<div id="stage-1---read-in-data" class="section level2">
<h2>Stage 1 - Read in data</h2>
<p>First of all, data must be read and prepared such that the quality assessment tests can be executed. Data preparation requires transforming the dataset to a standardised activity log format. However, earlier we mentioned two input data formats: an activity log and an event log. When an event log is available, it needs to be converted to an activity log. <code>DaQAPO</code> provides a set of functions to assist the user in this process.</p>
<div id="preparing-an-activity-log" class="section level3">
<h3>Preparing an Activity Log</h3>
<p>As mentioned earlier, the goal of reading and preparing data is to obtain a standardised activity log format. When your source data is already in this format, preparations come down to the following elements:</p>
<ul>
<li>Providing appropriate names for timestamp columns</li>
<li>Applying the <code>POSIXct</code> timestamp format</li>
</ul>
<p>For this section, the dataset <code>hospital</code> will be used to illustrate data preparations. Two main functions help the user to prepare his/her own dataset:</p>
<ul>
<li><code>rename</code></li>
<li><code>convert_timestamp</code></li>
<li><code>activitylog</code></li>
</ul>
<div id="rename" class="section level4">
<h4>Rename</h4>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">hospital <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="st">  </span><span class="kw">rename</span>(<span class="dt">start =</span> start_ts,</a>
<a class="sourceLine" id="cb3-3" title="3">         <span class="dt">complete =</span> complete_ts) -&gt;<span class="st"> </span>hospital</a></code></pre></div>
</div>
<div id="convert-format" class="section level4">
<h4>Convert format</h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">hospital <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="st">  </span><span class="kw">convert_timestamps</span>(<span class="kw">c</span>(<span class="st">&quot;start&quot;</span>,<span class="st">&quot;complete&quot;</span>), <span class="dt">format =</span> dmy_hms) -&gt;<span class="st"> </span>hospital</a></code></pre></div>
</div>
<div id="create-activitylog" class="section level4">
<h4>Create activitylog</h4>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">hospital <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="st">  </span><span class="kw">activitylog</span>(<span class="dt">case_id =</span> <span class="st">&quot;patient_visit_nr&quot;</span>,</a>
<a class="sourceLine" id="cb5-3" title="3">              <span class="dt">activity_id =</span> <span class="st">&quot;activity&quot;</span>,</a>
<a class="sourceLine" id="cb5-4" title="4">              <span class="dt">resource_id =</span> <span class="st">&quot;originator&quot;</span>,</a>
<a class="sourceLine" id="cb5-5" title="5">              <span class="dt">lifecycle_ids =</span> <span class="kw">c</span>(<span class="st">&quot;start&quot;</span>, <span class="st">&quot;complete&quot;</span>)) -&gt;<span class="st"> </span>hospital</a></code></pre></div>
</div>
</div>
<div id="preparing-an-event-log" class="section level3">
<h3>Preparing an Event Log</h3>
<p>With event logs, things are a bit more complex. In an event log, each row represents only a part of an activity instance. Therefore, more complex data transformations must be executed and several problems could arise. In this section, we will use an event log variant of the activity log used earlier, named <code>hospital_events</code>. three functions form the building blocks of the required data preparation:</p>
<ul>
<li><code>convert_timestamps</code></li>
<li><code>assign_instance_id</code></li>
<li><code>check/fix_resource_inconsistencies</code></li>
<li><code>standardize_lifecycle</code></li>
<li><code>events_to_activitylog</code></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">hospital_events</a>
<a class="sourceLine" id="cb6-2" title="2"><span class="co">#&gt; # A tibble: 106 x 8</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="co">#&gt;    patient_visit_nr activity originator event_lifecycle~ timestamp triagecode</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co">#&gt;               &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;            &lt;chr&gt;          &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="co">#&gt;  1              510 registr~ Clerk 9    start            20/11/20~          3</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="co">#&gt;  2              510 registr~ Clerk 9    complete         20/11/20~          3</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="co">#&gt;  3              510 Triage   Nurse 27   start            20/11/20~          3</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="co">#&gt;  4              510 Triage   Nurse 27   complete         20/11/20~          3</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="co">#&gt;  5              510 Clinica~ Doctor 7   start            20/11/20~         NA</span></a>
<a class="sourceLine" id="cb6-10" title="10"><span class="co">#&gt;  6              510 Clinica~ Doctor 4   complete         20/11/20~         NA</span></a>
<a class="sourceLine" id="cb6-11" title="11"><span class="co">#&gt;  7              512 Registr~ Clerk 12   start            20/11/20~          3</span></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="co">#&gt;  8              512 Registr~ Clerk 12   complete         20/11/20~          3</span></a>
<a class="sourceLine" id="cb6-13" title="13"><span class="co">#&gt;  9              512 Triage   Nurse 27   start            20/11/20~          3</span></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="co">#&gt; 10              512 Triage   Nurse 27   complete         20/11/20~          3</span></a>
<a class="sourceLine" id="cb6-15" title="15"><span class="co">#&gt; # ... with 96 more rows, and 2 more variables: specialization &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb6-16" title="16"><span class="co">#&gt; #   event_matching &lt;dbl&gt;</span></a></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">hospital_events <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="st">  </span><span class="kw">convert_timestamps</span>(<span class="kw">c</span>(<span class="st">&quot;timestamp&quot;</span>), <span class="dt">format =</span> dmy_hms) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">event_matching =</span> <span class="kw">paste</span>(patient_visit_nr, activity, event_matching)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="st">  </span><span class="kw">events_to_activitylog</span>(<span class="dt">case_id =</span> <span class="st">&quot;patient_visit_nr&quot;</span>, </a>
<a class="sourceLine" id="cb7-5" title="5">                        <span class="dt">activity_id =</span> <span class="st">&quot;activity&quot;</span>, </a>
<a class="sourceLine" id="cb7-6" title="6">                        <span class="dt">activity_instance_id =</span> <span class="st">&quot;event_matching&quot;</span>, </a>
<a class="sourceLine" id="cb7-7" title="7">                        <span class="dt">timestamp =</span> <span class="st">&quot;timestamp&quot;</span>, </a>
<a class="sourceLine" id="cb7-8" title="8">                        <span class="dt">resource_id =</span> <span class="st">&quot;originator&quot;</span>,</a>
<a class="sourceLine" id="cb7-9" title="9">                        <span class="dt">lifecycle_id =</span> <span class="st">&quot;event_lifecycle_state&quot;</span>) -&gt;<span class="st"> </span>hospital_events</a></code></pre></div>
</div>
</div>
<div id="stage-2---data-quality-assessment" class="section level2">
<h2>Stage 2 - Data Quality Assessment</h2>
<p>The table below summarizes the different data quality assessment tests available in DaQAPO.</p>
<table>
<caption>An overview of data quality tests in DaQAPO.</caption>
<colgroup>
<col width="22%"></col>
<col width="52%"></col>
<col width="25%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left">Function name</th>
<th align="left">Description</th>
<th align="left">Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">missing_values</td>
<td align="left">Function detecting missing values at different levels of aggregation</td>
<td align="left">Summary in console + Returns rows with NAs</td>
</tr>
<tr class="even">
<td align="left">similar_labels</td>
<td align="left">Function detecting potential spelling mistakes</td>
<td align="left">Table showing similarities for each label</td>
</tr>
<tr class="odd">
<td align="left">incorrect_activity_names</td>
<td align="left">Function returning the incorrect activity labels in the log</td>
<td align="left">Summary in console + Returns rows with incorrect activities</td>
</tr>
<tr class="even">
<td align="left">unique_values</td>
<td align="left">Function listing all distinct combinations of the given log attributes</td>
<td align="left">Summary in console + Returns all unique combinations of values in given columns</td>
</tr>
<tr class="odd">
<td align="left">value_range</td>
<td align="left">Function detecting violations of the range of acceptable values</td>
<td align="left">Summary in console + Returns rows with value range infringements</td>
</tr>
<tr class="even">
<td align="left">incomplete_cases</td>
<td align="left">Function detecting incomplete cases in terms of the activities that need to be recorded for a case</td>
<td align="left">Summary in console + Returns traces in which the mentioned activities are not present</td>
</tr>
<tr class="odd">
<td align="left">time_anomalies</td>
<td align="left">Funtion detecting activity executions with negative or zero duration</td>
<td align="left">Summary in console + Returns rows with negative or zero durations</td>
</tr>
<tr class="even">
<td align="left">duration_outliers</td>
<td align="left">Function detecting duration outliers for a particular activity</td>
<td align="left">Summary in console + Returns rows with outliers</td>
</tr>
<tr class="odd">
<td align="left">inactive_periods</td>
<td align="left">Function detecting inactive periods, i.e. periods of time in which no activity executions/arrivals are recorded</td>
<td align="left">Summary in console + Returns periods of inactivity</td>
</tr>
<tr class="even">
<td align="left">case_id_sequence</td>
<td align="left">Function detecting gaps in the sequence of case identifiers</td>
<td align="left">Summary in console + Returns case IDs which should be expected to be present</td>
</tr>
<tr class="odd">
<td align="left">multi_registration</td>
<td align="left">Function detecting the registration of a series of events in a short timestamp for the same case or by the same resource</td>
<td align="left">Summary in console + Returns rows with multiregistration on resource or case level</td>
</tr>
<tr class="even">
<td align="left">activity_frequency</td>
<td align="left">Function that detects activity frequency anomalies per case</td>
<td align="left">Summary in console + Returns activities in cases which are executed too many times</td>
</tr>
<tr class="odd">
<td align="left">activity_order</td>
<td align="left">Function detecting violations in activity order</td>
<td align="left">Summary in console + Returns detected orders which violate the specified order</td>
</tr>
<tr class="even">
<td align="left">attribute_dependency</td>
<td align="left">Function detecting violations of dependencies between attributes (i.e. condition(s) that should hold when (an)other condition(s) hold(s))</td>
<td align="left">Summary in console + Returns rows with dependency violations</td>
</tr>
<tr class="odd">
<td align="left">conditional_activity_presence</td>
<td align="left">Function detection violations of conditional activity presence (i.e. activity/activities that should be present when (a) particular condition(s) hold(s))</td>
<td align="left">Summary in console + Returns cases violating conditional activity presence</td>
</tr>
<tr class="even">
<td align="left">related_activities</td>
<td align="left">Function detecting missing related activities, i.e. activities that should be registered because another activity is registered for a case</td>
<td align="left">Summary in console + Returns cases violating relating activities</td>
</tr>
<tr class="odd">
<td align="left">filter_anomalies</td>
<td align="left">Function that filters detected anomalies, returned by the assessment tests, from the activity log</td>
<td align="left">The activity log without anomalies</td>
</tr>
</tbody>
</table>
<p>To illustrate the use of these assessment functions, four functions outlined in the table above are demonstrated in the remainder of this vignette.</p>
<div id="activity-frequency-violations" class="section level3">
<h3>Activity Frequency violations</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">hospital <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="st">  </span><span class="kw">detect_activity_frequency_violations</span>(<span class="st">&quot;Registration&quot;</span> =<span class="st"> </span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb8-3" title="3">                                       <span class="st">&quot;Clinical exam&quot;</span> =<span class="st"> </span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb8-4" title="4"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co">#&gt; For 3 cases in the activity log (13.6363636363636%) an anomaly is detected.</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="co">#&gt; The anomalies are spread over the following cases:</span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="co">#&gt;   patient_visit_nr activity          n</span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="co">#&gt;              &lt;dbl&gt; &lt;chr&gt;         &lt;int&gt;</span></a>
<a class="sourceLine" id="cb8-10" title="10"><span class="co">#&gt; 1              518 Registration      3</span></a>
<a class="sourceLine" id="cb8-11" title="11"><span class="co">#&gt; 2              512 Clinical exam     2</span></a>
<a class="sourceLine" id="cb8-12" title="12"><span class="co">#&gt; 3              535 Registration      2</span></a></code></pre></div>
</div>
<div id="activity-order-violations" class="section level3">
<h3>Activity Order Violations</h3>
</div>
<div id="attribute-dependencies" class="section level3">
<h3>Attribute dependencies</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">hospital <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="st">  </span><span class="kw">detect_attribute_dependencies</span>(<span class="dt">antecedent =</span> activity <span class="op">==</span><span class="st"> &quot;Registration&quot;</span>,</a>
<a class="sourceLine" id="cb9-3" title="3">                                <span class="dt">consequent =</span> <span class="kw">startsWith</span>(originator,<span class="st">&quot;Clerk&quot;</span>))</a>
<a class="sourceLine" id="cb9-4" title="4"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="co">#&gt; The following statement was checked: if condition(s) ~activity == &quot;Registration&quot; hold(s), then ~startsWith(originator, &quot;Clerk&quot;) should also hold.</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="co">#&gt; This statement holds for 12 (85.71%) of the rows in the activity log for which the first condition(s) hold and does not hold for 2 (14.29%) of these rows.</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="co">#&gt; For the following rows, the first condition(s) hold(s), but the second condition does not:</span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="co">#&gt; # A tibble: 2 x 7</span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="co">#&gt;   patient_visit_nr activity originator start               complete           </span></a>
<a class="sourceLine" id="cb9-10" title="10"><span class="co">#&gt;              &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dttm&gt;              &lt;dttm&gt;             </span></a>
<a class="sourceLine" id="cb9-11" title="11"><span class="co">#&gt; 1              528 Registr~ Nurse 6    2017-11-21 18:10:17 2017-11-21 18:15:04</span></a>
<a class="sourceLine" id="cb9-12" title="12"><span class="co">#&gt; 2              534 Registr~ &lt;NA&gt;       2017-11-22 18:35:00 2017-11-22 18:37:00</span></a>
<a class="sourceLine" id="cb9-13" title="13"><span class="co">#&gt; # ... with 2 more variables: triagecode &lt;dbl&gt;, specialization &lt;chr&gt;</span></a></code></pre></div>
</div>
<div id="detect-case-id-sequence-gaps" class="section level3">
<h3>Detect Case ID sequence gaps</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">hospital <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="st">  </span><span class="kw">detect_case_id_sequence_gaps</span>()</a>
<a class="sourceLine" id="cb10-3" title="3"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="co">#&gt; It was checked whether there are gaps in the sequence of case IDs</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="co">#&gt; From the 27 expected cases in the activity log, ranging from 510 to 536, 5 (18.52%) are missing.</span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="co">#&gt; These case numbers are:</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="co">#&gt;   case present</span></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="co">#&gt; 1  511   FALSE</span></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="co">#&gt; 2  513   FALSE</span></a>
<a class="sourceLine" id="cb10-10" title="10"><span class="co">#&gt; 3  514   FALSE</span></a>
<a class="sourceLine" id="cb10-11" title="11"><span class="co">#&gt; 4  515   FALSE</span></a>
<a class="sourceLine" id="cb10-12" title="12"><span class="co">#&gt; 5  516   FALSE</span></a></code></pre></div>
</div>
<div id="detect-conditional-activity-presence" class="section level3">
<h3>Detect Conditional Activity Presence</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">hospital <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="st">  </span><span class="kw">detect_conditional_activity_presence</span>(<span class="dt">condition =</span> specialization <span class="op">==</span><span class="st"> &quot;TRAU&quot;</span>,</a>
<a class="sourceLine" id="cb11-3" title="3">                                       <span class="dt">activities =</span> <span class="st">&quot;Clinical exam&quot;</span>)</a>
<a class="sourceLine" id="cb11-4" title="4"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="co">#&gt; The following statement was checked: if condition(s) ~specialization == &quot;TRAU&quot; hold(s), then activity/activities Clinical exam should be recorded</span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="co">#&gt; The condition(s) hold(s) for 2 cases. From these cases:</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="co">#&gt; - the specified activity/activities is/are recorded for 2 case(s) (100%)</span></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="co">#&gt; - the specified activity/activities is/are not recorded for 0 case(s) (0%)</span></a></code></pre></div>
</div>
<div id="detect-duration-outliers" class="section level3">
<h3>Detect Duration Outliers</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">hospital <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="st">  </span><span class="kw">detect_duration_outliers</span>(<span class="dt">Treatment =</span> <span class="kw">duration_within</span>(<span class="dt">bound_sd =</span> <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb12-3" title="3"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="co">#&gt; Outliers are detected for following activities</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="co">#&gt; Treatment     Lower bound: 5.06   Upper bound: 22.2</span></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="co">#&gt; A total of 1 is detected (1.89% of the activity executions)</span></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="co">#&gt; For the following activity instances, outliers are detected:</span></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="co">#&gt; # A tibble: 1 x 13</span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="co">#&gt;   patient_visit_nr activity originator start               complete           </span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="co">#&gt;              &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dttm&gt;              &lt;dttm&gt;             </span></a>
<a class="sourceLine" id="cb12-11" title="11"><span class="co">#&gt; 1              523 Treatme~ Nurse 17   2017-11-21 18:26:04 2017-11-21 18:55:00</span></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="co">#&gt; # ... with 8 more variables: triagecode &lt;dbl&gt;, specialization &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb12-13" title="13"><span class="co">#&gt; #   duration &lt;dbl&gt;, mean &lt;dbl&gt;, sd &lt;dbl&gt;, bound_sd &lt;dbl&gt;, lower_bound &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb12-14" title="14"><span class="co">#&gt; #   upper_bound &lt;dbl&gt;</span></a></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">hospital <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="st">  </span><span class="kw">detect_duration_outliers</span>(<span class="dt">Treatment =</span> <span class="kw">duration_within</span>(<span class="dt">lower_bound =</span> <span class="dv">0</span>, <span class="dt">upper_bound =</span> <span class="dv">15</span>))</a>
<a class="sourceLine" id="cb13-3" title="3"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="co">#&gt; Outliers are detected for following activities</span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="co">#&gt; Treatment     Lower bound: 0      Upper bound: 15</span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="co">#&gt; A total of 1 is detected (1.89% of the activity executions)</span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="co">#&gt; For the following activity instances, outliers are detected:</span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="co">#&gt; # A tibble: 1 x 13</span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="co">#&gt;   patient_visit_nr activity originator start               complete           </span></a>
<a class="sourceLine" id="cb13-10" title="10"><span class="co">#&gt;              &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dttm&gt;              &lt;dttm&gt;             </span></a>
<a class="sourceLine" id="cb13-11" title="11"><span class="co">#&gt; 1              523 Treatme~ Nurse 17   2017-11-21 18:26:04 2017-11-21 18:55:00</span></a>
<a class="sourceLine" id="cb13-12" title="12"><span class="co">#&gt; # ... with 8 more variables: triagecode &lt;dbl&gt;, specialization &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb13-13" title="13"><span class="co">#&gt; #   duration &lt;dbl&gt;, mean &lt;dbl&gt;, sd &lt;dbl&gt;, bound_sd &lt;dbl&gt;, lower_bound &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb13-14" title="14"><span class="co">#&gt; #   upper_bound &lt;dbl&gt;</span></a></code></pre></div>
</div>
<div id="detect-inactive-periods" class="section level3">
<h3>Detect inactive periods</h3>
</div>
<div id="detect-incomplete-cases" class="section level3">
<h3>Detect incomplete cases</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">hospital <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="st">  </span><span class="kw">detect_incomplete_cases</span>(<span class="dt">activities =</span> <span class="kw">c</span>(<span class="st">&quot;Registration&quot;</span>,<span class="st">&quot;Triage&quot;</span>,<span class="st">&quot;Clinical exam&quot;</span>,<span class="st">&quot;Treatment&quot;</span>,<span class="st">&quot;Treatment evaluation&quot;</span>))</a>
<a class="sourceLine" id="cb14-3" title="3"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="co">#&gt; It was checked whether the activities Clinical exam, Registration, Treatment, Treatment evaluation, Triage are present for cases.</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="co">#&gt; These activities are present for 4 (39.62%) of the cases and are not present for 18 (60.38%) of the cases.</span></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="co">#&gt; Note: this function only checks the presence of activities for a particular case, not the completeness of these entries in the activity log or the order of activities.</span></a>
<a class="sourceLine" id="cb14-7" title="7"><span class="co">#&gt; For cases for which the aforementioned activities are not all present, the following activities are recorded (ordered by decreasing frequeny of occurrence):</span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="co">#&gt; # A tibble: 9 x 3</span></a>
<a class="sourceLine" id="cb14-9" title="9"><span class="co">#&gt;   activity               n case_ids                                             </span></a>
<a class="sourceLine" id="cb14-10" title="10"><span class="co">#&gt;   &lt;chr&gt;              &lt;int&gt; &lt;chr&gt;                                                </span></a>
<a class="sourceLine" id="cb14-11" title="11"><span class="co">#&gt; 1 Triage                11 510 - 512 - 517 - 521 - 524 - 525 - 526 - 527 - 528 ~</span></a>
<a class="sourceLine" id="cb14-12" title="12"><span class="co">#&gt; 2 Registration           9 512 - 518 - 518 - 518 - 521 - 522 - 527 - 528 - 534  </span></a>
<a class="sourceLine" id="cb14-13" title="13"><span class="co">#&gt; 3 Clinical exam          5 512 - 510 - 527 - 528 - 512                          </span></a>
<a class="sourceLine" id="cb14-14" title="14"><span class="co">#&gt; 4 Treatment evaluat~     2 529 - 532                                            </span></a>
<a class="sourceLine" id="cb14-15" title="15"><span class="co">#&gt; 5 0                      1 533                                                  </span></a>
<a class="sourceLine" id="cb14-16" title="16"><span class="co">#&gt; 6 Trage                  1 520                                                  </span></a>
<a class="sourceLine" id="cb14-17" title="17"><span class="co">#&gt; 7 Treatment              1 532                                                  </span></a>
<a class="sourceLine" id="cb14-18" title="18"><span class="co">#&gt; 8 Triaga                 1 522                                                  </span></a>
<a class="sourceLine" id="cb14-19" title="19"><span class="co">#&gt; 9 registration           1 510</span></a></code></pre></div>
</div>
<div id="detect-incorrect-activity-names" class="section level3">
<h3>Detect Incorrect Activity Names</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">hospital <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="st">  </span><span class="kw">detect_incorrect_activity_names</span>(<span class="dt">allowed_activities =</span> <span class="kw">c</span>(<span class="st">&quot;Registration&quot;</span>,<span class="st">&quot;Triage&quot;</span>,<span class="st">&quot;Clinical exam&quot;</span>,<span class="st">&quot;Treatment&quot;</span>,<span class="st">&quot;Treatment evaluation&quot;</span>))</a>
<a class="sourceLine" id="cb15-3" title="3"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb15-4" title="4"><span class="co">#&gt; 4 out of 9 (44.44% ) activity labels are identified to be incorrect.</span></a>
<a class="sourceLine" id="cb15-5" title="5"><span class="co">#&gt; These activity labels are:</span></a>
<a class="sourceLine" id="cb15-6" title="6"><span class="co">#&gt; registration - Trage - Triaga - 0</span></a>
<a class="sourceLine" id="cb15-7" title="7"><span class="co">#&gt; Given this information, 4 of 53 (7.55%) rows in the activity log are incorrect. These are the following:</span></a>
<a class="sourceLine" id="cb15-8" title="8"><span class="co">#&gt; # A tibble: 4 x 7</span></a>
<a class="sourceLine" id="cb15-9" title="9"><span class="co">#&gt;   patient_visit_nr activity originator start               complete           </span></a>
<a class="sourceLine" id="cb15-10" title="10"><span class="co">#&gt;              &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dttm&gt;              &lt;dttm&gt;             </span></a>
<a class="sourceLine" id="cb15-11" title="11"><span class="co">#&gt; 1              510 registr~ Clerk 9    2017-11-20 10:18:17 2017-11-20 10:20:06</span></a>
<a class="sourceLine" id="cb15-12" title="12"><span class="co">#&gt; 2              520 Trage    Nurse 17   2017-11-21 13:43:16 2017-11-21 13:39:00</span></a>
<a class="sourceLine" id="cb15-13" title="13"><span class="co">#&gt; 3              522 Triaga   Nurse 5    2017-11-21 15:15:25 2017-11-21 15:18:04</span></a>
<a class="sourceLine" id="cb15-14" title="14"><span class="co">#&gt; 4              533 0        &lt;NA&gt;       2017-11-22 18:35:00 2017-11-22 18:37:00</span></a>
<a class="sourceLine" id="cb15-15" title="15"><span class="co">#&gt; # ... with 2 more variables: triagecode &lt;dbl&gt;, specialization &lt;chr&gt;</span></a></code></pre></div>
</div>
<div id="detect-missing-values" class="section level3">
<h3>Detect Missing Values</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1">hospital <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-2" title="2"><span class="st">  </span><span class="kw">detect_missing_values</span>(<span class="dt">column =</span> <span class="st">&quot;activity&quot;</span>)</a>
<a class="sourceLine" id="cb16-3" title="3"><span class="co">#&gt; Selected level of aggregation: overview </span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb16-5" title="5"><span class="co">#&gt; Warning in detect_missing_values.activitylog(., column = &quot;activity&quot;): Ignoring</span></a>
<a class="sourceLine" id="cb16-6" title="6"><span class="co">#&gt; provided column argument at overview level.</span></a>
<a class="sourceLine" id="cb16-7" title="7"><span class="co">#&gt; *** OUTPUT *** </span></a>
<a class="sourceLine" id="cb16-8" title="8"><span class="co">#&gt; Absolute number of missing values per column: </span></a>
<a class="sourceLine" id="cb16-9" title="9"><span class="co">#&gt;                   </span></a>
<a class="sourceLine" id="cb16-10" title="10"><span class="co">#&gt; patient_visit_nr 0</span></a>
<a class="sourceLine" id="cb16-11" title="11"><span class="co">#&gt; activity         0</span></a>
<a class="sourceLine" id="cb16-12" title="12"><span class="co">#&gt; originator       2</span></a>
<a class="sourceLine" id="cb16-13" title="13"><span class="co">#&gt; start            1</span></a>
<a class="sourceLine" id="cb16-14" title="14"><span class="co">#&gt; complete         0</span></a>
<a class="sourceLine" id="cb16-15" title="15"><span class="co">#&gt; triagecode       1</span></a>
<a class="sourceLine" id="cb16-16" title="16"><span class="co">#&gt; specialization   0</span></a>
<a class="sourceLine" id="cb16-17" title="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb16-18" title="18"><span class="co">#&gt; Relative number of missing values per column (expressed as percentage): </span></a>
<a class="sourceLine" id="cb16-19" title="19"><span class="co">#&gt;                          </span></a>
<a class="sourceLine" id="cb16-20" title="20"><span class="co">#&gt; patient_visit_nr 0.000000</span></a>
<a class="sourceLine" id="cb16-21" title="21"><span class="co">#&gt; activity         0.000000</span></a>
<a class="sourceLine" id="cb16-22" title="22"><span class="co">#&gt; originator       3.773585</span></a>
<a class="sourceLine" id="cb16-23" title="23"><span class="co">#&gt; start            1.886792</span></a>
<a class="sourceLine" id="cb16-24" title="24"><span class="co">#&gt; complete         0.000000</span></a>
<a class="sourceLine" id="cb16-25" title="25"><span class="co">#&gt; triagecode       1.886792</span></a>
<a class="sourceLine" id="cb16-26" title="26"><span class="co">#&gt; specialization   0.000000</span></a>
<a class="sourceLine" id="cb16-27" title="27"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb16-28" title="28"><span class="co">#&gt; Overview of activity log rows which are incomplete:</span></a>
<a class="sourceLine" id="cb16-29" title="29"><span class="co">#&gt; # A tibble: 4 x 7</span></a>
<a class="sourceLine" id="cb16-30" title="30"><span class="co">#&gt;   patient_visit_nr activity originator start               complete           </span></a>
<a class="sourceLine" id="cb16-31" title="31"><span class="co">#&gt;              &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dttm&gt;              &lt;dttm&gt;             </span></a>
<a class="sourceLine" id="cb16-32" title="32"><span class="co">#&gt; 1              510 Clinica~ Doctor 7   2017-11-20 11:35:01 2017-11-20 11:36:09</span></a>
<a class="sourceLine" id="cb16-33" title="33"><span class="co">#&gt; 2              533 0        &lt;NA&gt;       2017-11-22 18:35:00 2017-11-22 18:37:00</span></a>
<a class="sourceLine" id="cb16-34" title="34"><span class="co">#&gt; 3              534 Registr~ &lt;NA&gt;       2017-11-22 18:35:00 2017-11-22 18:37:00</span></a>
<a class="sourceLine" id="cb16-35" title="35"><span class="co">#&gt; 4              512 Clinica~ Doctor 7   NA                  2017-11-20 11:33:57</span></a>
<a class="sourceLine" id="cb16-36" title="36"><span class="co">#&gt; # ... with 2 more variables: triagecode &lt;dbl&gt;, specialization &lt;chr&gt;</span></a>
<a class="sourceLine" id="cb16-37" title="37"><span class="co">## column heeft hier geen zin?!</span></a></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1">hospital <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="st">  </span><span class="kw">detect_missing_values</span>(<span class="dt">level_of_aggregation =</span> <span class="st">&quot;activity&quot;</span>)</a>
<a class="sourceLine" id="cb17-3" title="3"><span class="co">#&gt; Selected level of aggregation: activity </span></a>
<a class="sourceLine" id="cb17-4" title="4"><span class="co">#&gt;  </span></a>
<a class="sourceLine" id="cb17-5" title="5"><span class="co">#&gt; *** OUTPUT *** </span></a>
<a class="sourceLine" id="cb17-6" title="6"><span class="co">#&gt; Absolute number of missing values per column (per activity): </span></a>
<a class="sourceLine" id="cb17-7" title="7"><span class="co">#&gt; # A tibble: 9 x 7</span></a>
<a class="sourceLine" id="cb17-8" title="8"><span class="co">#&gt;   activity  patient_visit_nr originator start complete triagecode specialization</span></a>
<a class="sourceLine" id="cb17-9" title="9"><span class="co">#&gt;   &lt;chr&gt;                &lt;int&gt;      &lt;int&gt; &lt;int&gt;    &lt;int&gt;      &lt;int&gt;          &lt;int&gt;</span></a>
<a class="sourceLine" id="cb17-10" title="10"><span class="co">#&gt; 1 0                        0          1     0        0          0              0</span></a>
<a class="sourceLine" id="cb17-11" title="11"><span class="co">#&gt; 2 Clinical~                0          0     1        0          1              0</span></a>
<a class="sourceLine" id="cb17-12" title="12"><span class="co">#&gt; 3 Registra~                0          1     0        0          0              0</span></a>
<a class="sourceLine" id="cb17-13" title="13"><span class="co">#&gt; 4 Trage                    0          0     0        0          0              0</span></a>
<a class="sourceLine" id="cb17-14" title="14"><span class="co">#&gt; 5 Treatment                0          0     0        0          0              0</span></a>
<a class="sourceLine" id="cb17-15" title="15"><span class="co">#&gt; 6 Treatmen~                0          0     0        0          0              0</span></a>
<a class="sourceLine" id="cb17-16" title="16"><span class="co">#&gt; 7 Triaga                   0          0     0        0          0              0</span></a>
<a class="sourceLine" id="cb17-17" title="17"><span class="co">#&gt; 8 Triage                   0          0     0        0          0              0</span></a>
<a class="sourceLine" id="cb17-18" title="18"><span class="co">#&gt; 9 registra~                0          0     0        0          0              0</span></a>
<a class="sourceLine" id="cb17-19" title="19"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb17-20" title="20"><span class="co">#&gt; Relative number of missing values per column (per activity, expressed as percentage): </span></a>
<a class="sourceLine" id="cb17-21" title="21"><span class="co">#&gt; # A tibble: 9 x 7</span></a>
<a class="sourceLine" id="cb17-22" title="22"><span class="co">#&gt;   activity  patient_visit_nr originator start complete triagecode specialization</span></a>
<a class="sourceLine" id="cb17-23" title="23"><span class="co">#&gt;   &lt;chr&gt;                &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;          &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb17-24" title="24"><span class="co">#&gt; 1 0                        0     1      0            0      0                  0</span></a>
<a class="sourceLine" id="cb17-25" title="25"><span class="co">#&gt; 2 Clinical~                0     0      0.111        0      0.111              0</span></a>
<a class="sourceLine" id="cb17-26" title="26"><span class="co">#&gt; 3 Registra~                0     0.0714 0            0      0                  0</span></a>
<a class="sourceLine" id="cb17-27" title="27"><span class="co">#&gt; 4 Trage                    0     0      0            0      0                  0</span></a>
<a class="sourceLine" id="cb17-28" title="28"><span class="co">#&gt; 5 Treatment                0     0      0            0      0                  0</span></a>
<a class="sourceLine" id="cb17-29" title="29"><span class="co">#&gt; 6 Treatmen~                0     0      0            0      0                  0</span></a>
<a class="sourceLine" id="cb17-30" title="30"><span class="co">#&gt; 7 Triaga                   0     0      0            0      0                  0</span></a>
<a class="sourceLine" id="cb17-31" title="31"><span class="co">#&gt; 8 Triage                   0     0      0            0      0                  0</span></a>
<a class="sourceLine" id="cb17-32" title="32"><span class="co">#&gt; 9 registra~                0     0      0            0      0                  0</span></a>
<a class="sourceLine" id="cb17-33" title="33"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb17-34" title="34"><span class="co">#&gt; Overview of activity log rows which are incomplete:</span></a>
<a class="sourceLine" id="cb17-35" title="35"><span class="co">#&gt; # A tibble: 4 x 7</span></a>
<a class="sourceLine" id="cb17-36" title="36"><span class="co">#&gt;   patient_visit_nr activity originator start               complete           </span></a>
<a class="sourceLine" id="cb17-37" title="37"><span class="co">#&gt;              &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dttm&gt;              &lt;dttm&gt;             </span></a>
<a class="sourceLine" id="cb17-38" title="38"><span class="co">#&gt; 1              510 Clinica~ Doctor 7   2017-11-20 11:35:01 2017-11-20 11:36:09</span></a>
<a class="sourceLine" id="cb17-39" title="39"><span class="co">#&gt; 2              533 0        &lt;NA&gt;       2017-11-22 18:35:00 2017-11-22 18:37:00</span></a>
<a class="sourceLine" id="cb17-40" title="40"><span class="co">#&gt; 3              534 Registr~ &lt;NA&gt;       2017-11-22 18:35:00 2017-11-22 18:37:00</span></a>
<a class="sourceLine" id="cb17-41" title="41"><span class="co">#&gt; 4              512 Clinica~ Doctor 7   NA                  2017-11-20 11:33:57</span></a>
<a class="sourceLine" id="cb17-42" title="42"><span class="co">#&gt; # ... with 2 more variables: triagecode &lt;dbl&gt;, specialization &lt;chr&gt;</span></a></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">hospital <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-2" title="2"><span class="st">  </span><span class="kw">detect_missing_values</span>(</a>
<a class="sourceLine" id="cb18-3" title="3">  <span class="dt">level_of_aggregation =</span> <span class="st">&quot;column&quot;</span>,</a>
<a class="sourceLine" id="cb18-4" title="4">  <span class="dt">column =</span> <span class="st">&quot;triagecode&quot;</span>)</a>
<a class="sourceLine" id="cb18-5" title="5"><span class="co">#&gt; Selected level of aggregation: column </span></a>
<a class="sourceLine" id="cb18-6" title="6"><span class="co">#&gt;  </span></a>
<a class="sourceLine" id="cb18-7" title="7"><span class="co">#&gt; *** OUTPUT *** </span></a>
<a class="sourceLine" id="cb18-8" title="8"><span class="co">#&gt; Absolute number of missing values in column triagecode : 1 </span></a>
<a class="sourceLine" id="cb18-9" title="9"><span class="co">#&gt; Relative number of missing values in column triagecode (expressed as percentage): 1.886792 </span></a>
<a class="sourceLine" id="cb18-10" title="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb18-11" title="11"><span class="co">#&gt; Overview of activity log rows in which triagecode is missing:</span></a>
<a class="sourceLine" id="cb18-12" title="12"><span class="co">#&gt; # A tibble: 1 x 7</span></a>
<a class="sourceLine" id="cb18-13" title="13"><span class="co">#&gt;   patient_visit_nr activity originator start               complete           </span></a>
<a class="sourceLine" id="cb18-14" title="14"><span class="co">#&gt;              &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dttm&gt;              &lt;dttm&gt;             </span></a>
<a class="sourceLine" id="cb18-15" title="15"><span class="co">#&gt; 1              510 Clinica~ Doctor 7   2017-11-20 11:35:01 2017-11-20 11:36:09</span></a>
<a class="sourceLine" id="cb18-16" title="16"><span class="co">#&gt; # ... with 2 more variables: triagecode &lt;dbl&gt;, specialization &lt;chr&gt;</span></a></code></pre></div>
</div>
<div id="detect-multiregistration" class="section level3">
<h3>Detect Multiregistration</h3>
</div>
<div id="detect-related-activities" class="section level3">
<h3>Detect Related activities</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1">hospital <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-2" title="2"><span class="st">  </span><span class="kw">detect_related_activities</span>(<span class="dt">antecedent =</span> <span class="st">&quot;Treatment evaluation&quot;</span>, </a>
<a class="sourceLine" id="cb19-3" title="3">                            <span class="dt">consequent =</span> <span class="st">&quot;Treatment&quot;</span>)</a>
<a class="sourceLine" id="cb19-4" title="4"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb19-5" title="5"><span class="co">#&gt; The following statement was checked: if Treatment evaluation is recorded for a case, then Treatment should also be recorded.</span></a>
<a class="sourceLine" id="cb19-6" title="6"><span class="co">#&gt; This statement holds for 5 (83.33%) of the cases in which Treatment evaluation was recorded and does not hold for 1 (16.67%) of the cases in which Treatment evaluation was recorded.</span></a>
<a class="sourceLine" id="cb19-7" title="7"><span class="co">#&gt; For the following cases, only Treatment evaluation is recorded:</span></a>
<a class="sourceLine" id="cb19-8" title="8"><span class="co">#&gt; [1] 529</span></a></code></pre></div>
</div>
<div id="detect-similar-labels" class="section level3">
<h3>Detect similar labels</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1">hospital <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="st">  </span><span class="kw">detect_similar_labels</span>(<span class="dt">column_labels =</span> <span class="st">&quot;activity&quot;</span>, <span class="dt">max_edit_distance =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb20-3" title="3"><span class="co">#&gt; # A tibble: 5 x 3</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="co">#&gt;   column_labels labels       similar_to     </span></a>
<a class="sourceLine" id="cb20-5" title="5"><span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;        &lt;chr&gt;          </span></a>
<a class="sourceLine" id="cb20-6" title="6"><span class="co">#&gt; 1 activity      registration Registration   </span></a>
<a class="sourceLine" id="cb20-7" title="7"><span class="co">#&gt; 2 activity      Registration registration   </span></a>
<a class="sourceLine" id="cb20-8" title="8"><span class="co">#&gt; 3 activity      Triage       Trage - Triaga </span></a>
<a class="sourceLine" id="cb20-9" title="9"><span class="co">#&gt; 4 activity      Trage        Triage - Triaga</span></a>
<a class="sourceLine" id="cb20-10" title="10"><span class="co">#&gt; 5 activity      Triaga       Triage - Trage</span></a></code></pre></div>
</div>
<div id="detect-time-anomalies" class="section level3">
<h3>Detect Time Anomalies</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1">hospital <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-2" title="2"><span class="st">  </span><span class="kw">detect_time_anomalies</span>()</a>
<a class="sourceLine" id="cb21-3" title="3"><span class="co">#&gt; Selected anomaly type: both</span></a>
<a class="sourceLine" id="cb21-4" title="4"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb21-5" title="5"><span class="co">#&gt; For 5 rows in the activity log (9.43%), an anomaly is detected.</span></a>
<a class="sourceLine" id="cb21-6" title="6"><span class="co">#&gt; The anomalies are spread over the activities as follows:</span></a>
<a class="sourceLine" id="cb21-7" title="7"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb21-8" title="8"><span class="co">#&gt; # Groups:   activity [3]</span></a>
<a class="sourceLine" id="cb21-9" title="9"><span class="co">#&gt;   activity      type                  n</span></a>
<a class="sourceLine" id="cb21-10" title="10"><span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;             &lt;int&gt;</span></a>
<a class="sourceLine" id="cb21-11" title="11"><span class="co">#&gt; 1 Registration  negative duration     3</span></a>
<a class="sourceLine" id="cb21-12" title="12"><span class="co">#&gt; 2 Clinical exam zero duration         1</span></a>
<a class="sourceLine" id="cb21-13" title="13"><span class="co">#&gt; 3 Trage         negative duration     1</span></a>
<a class="sourceLine" id="cb21-14" title="14"><span class="co">#&gt; Anomalies are found in the following rows:</span></a>
<a class="sourceLine" id="cb21-15" title="15"><span class="co">#&gt; # A tibble: 5 x 9</span></a>
<a class="sourceLine" id="cb21-16" title="16"><span class="co">#&gt;   patient_visit_nr activity originator start               complete           </span></a>
<a class="sourceLine" id="cb21-17" title="17"><span class="co">#&gt;              &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dttm&gt;              &lt;dttm&gt;             </span></a>
<a class="sourceLine" id="cb21-18" title="18"><span class="co">#&gt; 1              518 Registr~ Clerk 12   2017-11-21 11:45:16 2017-11-21 11:22:16</span></a>
<a class="sourceLine" id="cb21-19" title="19"><span class="co">#&gt; 2              518 Registr~ Clerk 6    2017-11-21 11:45:16 2017-11-21 11:22:16</span></a>
<a class="sourceLine" id="cb21-20" title="20"><span class="co">#&gt; 3              518 Registr~ Clerk 9    2017-11-21 11:45:16 2017-11-21 11:22:16</span></a>
<a class="sourceLine" id="cb21-21" title="21"><span class="co">#&gt; 4              520 Trage    Nurse 17   2017-11-21 13:43:16 2017-11-21 13:39:00</span></a>
<a class="sourceLine" id="cb21-22" title="22"><span class="co">#&gt; 5              528 Clinica~ Doctor 1   2017-11-21 19:00:00 2017-11-21 19:00:00</span></a>
<a class="sourceLine" id="cb21-23" title="23"><span class="co">#&gt; # ... with 4 more variables: triagecode &lt;dbl&gt;, specialization &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb21-24" title="24"><span class="co">#&gt; #   duration &lt;dbl&gt;, type &lt;chr&gt;</span></a></code></pre></div>
</div>
<div id="detect-unique-values" class="section level3">
<h3>Detect Unique Values</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1">hospital <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-2" title="2"><span class="st">  </span><span class="kw">detect_unique_values</span>(<span class="dt">column_labels =</span> <span class="st">&quot;activity&quot;</span>)</a>
<a class="sourceLine" id="cb22-3" title="3"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb22-4" title="4"><span class="co">#&gt; Distinct entries are computed for the following columns: </span></a>
<a class="sourceLine" id="cb22-5" title="5"><span class="co">#&gt; activity</span></a>
<a class="sourceLine" id="cb22-6" title="6"><span class="co">#&gt; # A tibble: 9 x 1</span></a>
<a class="sourceLine" id="cb22-7" title="7"><span class="co">#&gt;   activity            </span></a>
<a class="sourceLine" id="cb22-8" title="8"><span class="co">#&gt;   &lt;chr&gt;               </span></a>
<a class="sourceLine" id="cb22-9" title="9"><span class="co">#&gt; 1 registration        </span></a>
<a class="sourceLine" id="cb22-10" title="10"><span class="co">#&gt; 2 Registration        </span></a>
<a class="sourceLine" id="cb22-11" title="11"><span class="co">#&gt; 3 Triage              </span></a>
<a class="sourceLine" id="cb22-12" title="12"><span class="co">#&gt; 4 Clinical exam       </span></a>
<a class="sourceLine" id="cb22-13" title="13"><span class="co">#&gt; 5 Trage               </span></a>
<a class="sourceLine" id="cb22-14" title="14"><span class="co">#&gt; 6 Treatment           </span></a>
<a class="sourceLine" id="cb22-15" title="15"><span class="co">#&gt; 7 Triaga              </span></a>
<a class="sourceLine" id="cb22-16" title="16"><span class="co">#&gt; 8 Treatment evaluation</span></a>
<a class="sourceLine" id="cb22-17" title="17"><span class="co">#&gt; 9 0</span></a></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1">hospital <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="st">  </span><span class="kw">detect_unique_values</span>(<span class="dt">column_labels =</span> <span class="kw">c</span>(<span class="st">&quot;activity&quot;</span>, <span class="st">&quot;originator&quot;</span>))</a>
<a class="sourceLine" id="cb23-3" title="3"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb23-4" title="4"><span class="co">#&gt; Distinct entries are computed for the following columns: </span></a>
<a class="sourceLine" id="cb23-5" title="5"><span class="co">#&gt; activity - originator</span></a>
<a class="sourceLine" id="cb23-6" title="6"><span class="co">#&gt; # A tibble: 22 x 2</span></a>
<a class="sourceLine" id="cb23-7" title="7"><span class="co">#&gt;    activity      originator</span></a>
<a class="sourceLine" id="cb23-8" title="8"><span class="co">#&gt;    &lt;chr&gt;         &lt;chr&gt;     </span></a>
<a class="sourceLine" id="cb23-9" title="9"><span class="co">#&gt;  1 registration  Clerk 9   </span></a>
<a class="sourceLine" id="cb23-10" title="10"><span class="co">#&gt;  2 Registration  Clerk 12  </span></a>
<a class="sourceLine" id="cb23-11" title="11"><span class="co">#&gt;  3 Triage        Nurse 27  </span></a>
<a class="sourceLine" id="cb23-12" title="12"><span class="co">#&gt;  4 Clinical exam Doctor 7  </span></a>
<a class="sourceLine" id="cb23-13" title="13"><span class="co">#&gt;  5 Triage        Nurse 17  </span></a>
<a class="sourceLine" id="cb23-14" title="14"><span class="co">#&gt;  6 Registration  Clerk 6   </span></a>
<a class="sourceLine" id="cb23-15" title="15"><span class="co">#&gt;  7 Registration  Clerk 9   </span></a>
<a class="sourceLine" id="cb23-16" title="16"><span class="co">#&gt;  8 Trage         Nurse 17  </span></a>
<a class="sourceLine" id="cb23-17" title="17"><span class="co">#&gt;  9 Clinical exam Doctor 4  </span></a>
<a class="sourceLine" id="cb23-18" title="18"><span class="co">#&gt; 10 Registration  Clerk 3   </span></a>
<a class="sourceLine" id="cb23-19" title="19"><span class="co">#&gt; # ... with 12 more rows</span></a></code></pre></div>
</div>
<div id="detect-value-range-violations" class="section level3">
<h3>Detect Value Range Violations</h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1">hospital <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-2" title="2"><span class="st">  </span><span class="kw">detect_value_range_violations</span>(<span class="dt">triagecode =</span> <span class="kw">domain_numeric</span>(<span class="dt">from =</span> <span class="dv">0</span>, <span class="dt">to =</span> <span class="dv">5</span>))</a>
<a class="sourceLine" id="cb24-3" title="3"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb24-4" title="4"><span class="co">#&gt; The domain range for column triagecode is checked.</span></a>
<a class="sourceLine" id="cb24-5" title="5"><span class="co">#&gt; Values allowed between 0 and 5</span></a>
<a class="sourceLine" id="cb24-6" title="6"><span class="co">#&gt; The values fall within the specified domain range for 46 (86.79%) of the rows in the activity log and outside the domain range for 7 (13.21%) of these rows.</span></a>
<a class="sourceLine" id="cb24-7" title="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb24-8" title="8"><span class="co">#&gt; The following rows fall outside the specified domain range for indicated column:</span></a>
<a class="sourceLine" id="cb24-9" title="9"><span class="co">#&gt; # A tibble: 7 x 8</span></a>
<a class="sourceLine" id="cb24-10" title="10"><span class="co">#&gt;   column_checked patient_visit_nr activity originator start              </span></a>
<a class="sourceLine" id="cb24-11" title="11"><span class="co">#&gt;   &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dttm&gt;             </span></a>
<a class="sourceLine" id="cb24-12" title="12"><span class="co">#&gt; 1 triagecode                  510 Clinica~ Doctor 7   2017-11-20 11:35:01</span></a>
<a class="sourceLine" id="cb24-13" title="13"><span class="co">#&gt; 2 triagecode                  529 Treatme~ Doctor 1   2017-11-22 16:30:00</span></a>
<a class="sourceLine" id="cb24-14" title="14"><span class="co">#&gt; 3 triagecode                  530 Triage   Nurse 17   2017-11-22 18:00:00</span></a>
<a class="sourceLine" id="cb24-15" title="15"><span class="co">#&gt; 4 triagecode                  531 Triage   Nurse 17   2017-11-22 18:05:00</span></a>
<a class="sourceLine" id="cb24-16" title="16"><span class="co">#&gt; 5 triagecode                  532 Treatme~ Nurse 17   2017-11-22 18:15:00</span></a>
<a class="sourceLine" id="cb24-17" title="17"><span class="co">#&gt; 6 triagecode                  532 Treatme~ Doctor 7   2017-11-22 18:27:00</span></a>
<a class="sourceLine" id="cb24-18" title="18"><span class="co">#&gt; 7 triagecode                  533 0        &lt;NA&gt;       2017-11-22 18:35:00</span></a>
<a class="sourceLine" id="cb24-19" title="19"><span class="co">#&gt; # ... with 3 more variables: complete &lt;dttm&gt;, triagecode &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb24-20" title="20"><span class="co">#&gt; #   specialization &lt;chr&gt;</span></a></code></pre></div>
</div>
<div id="detect_value_range_violations" class="section level3">
<h3><code>detect_value_range_violations()</code></h3>
<p>The <code>detect_value_range_violations()</code> function checks whether the values of a passed attribute are within certain bounds for numeric attributes, or in a list of values for a character or factor attribute. For example, the triage code is typically a number between 1 and 5. We can easily test whether all cases abide to this rule.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">detect_value_range_violations</span>(hospital, <span class="st">&quot;triagecode&quot;</span> =<span class="st"> </span><span class="kw">domain_numeric</span>(<span class="dv">1</span>,<span class="dv">5</span>))</a>
<a class="sourceLine" id="cb25-2" title="2"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb25-3" title="3"><span class="co">#&gt; The domain range for column triagecode is checked.</span></a>
<a class="sourceLine" id="cb25-4" title="4"><span class="co">#&gt; Values allowed between 1 and 5</span></a>
<a class="sourceLine" id="cb25-5" title="5"><span class="co">#&gt; The values fall within the specified domain range for 45 (84.91%) of the rows in the activity log and outside the domain range for 8 (15.09%) of these rows.</span></a>
<a class="sourceLine" id="cb25-6" title="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb25-7" title="7"><span class="co">#&gt; The following rows fall outside the specified domain range for indicated column:</span></a>
<a class="sourceLine" id="cb25-8" title="8"><span class="co">#&gt; # A tibble: 8 x 8</span></a>
<a class="sourceLine" id="cb25-9" title="9"><span class="co">#&gt;   column_checked patient_visit_nr activity originator start              </span></a>
<a class="sourceLine" id="cb25-10" title="10"><span class="co">#&gt;   &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dttm&gt;             </span></a>
<a class="sourceLine" id="cb25-11" title="11"><span class="co">#&gt; 1 triagecode                  510 Clinica~ Doctor 7   2017-11-20 11:35:01</span></a>
<a class="sourceLine" id="cb25-12" title="12"><span class="co">#&gt; 2 triagecode                  529 Treatme~ Doctor 1   2017-11-22 16:30:00</span></a>
<a class="sourceLine" id="cb25-13" title="13"><span class="co">#&gt; 3 triagecode                  530 Triage   Nurse 17   2017-11-22 18:00:00</span></a>
<a class="sourceLine" id="cb25-14" title="14"><span class="co">#&gt; 4 triagecode                  531 Triage   Nurse 17   2017-11-22 18:05:00</span></a>
<a class="sourceLine" id="cb25-15" title="15"><span class="co">#&gt; 5 triagecode                  532 Treatme~ Nurse 17   2017-11-22 18:15:00</span></a>
<a class="sourceLine" id="cb25-16" title="16"><span class="co">#&gt; 6 triagecode                  532 Treatme~ Doctor 7   2017-11-22 18:27:00</span></a>
<a class="sourceLine" id="cb25-17" title="17"><span class="co">#&gt; 7 triagecode                  533 0        &lt;NA&gt;       2017-11-22 18:35:00</span></a>
<a class="sourceLine" id="cb25-18" title="18"><span class="co">#&gt; 8 triagecode                  534 Registr~ &lt;NA&gt;       2017-11-22 18:35:00</span></a>
<a class="sourceLine" id="cb25-19" title="19"><span class="co">#&gt; # ... with 3 more variables: complete &lt;dttm&gt;, triagecode &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb25-20" title="20"><span class="co">#&gt; #   specialization &lt;chr&gt;</span></a></code></pre></div>
<p>Data quality assessment tests provide the user with summary statistics in the console. Also, where appropriate, they return the rows in the log that are considered to be an anomaly. In this case, you get all rows where <code>cattr_triagecode &lt; 1</code> or <code>cattr_triagecode &gt; 5</code>. Therefore, one can simply request the unique cases in this result to get more specific information.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1"><span class="kw">detect_value_range_violations</span>(hospital, <span class="st">&quot;triagecode&quot;</span> =<span class="st"> </span><span class="kw">domain_numeric</span>(<span class="dv">1</span>,<span class="dv">5</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-2" title="2"><span class="st">  </span><span class="kw">distinct</span>(case_id, cattr_triagecode)</a>
<a class="sourceLine" id="cb26-3" title="3"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb26-4" title="4"><span class="co">#&gt; The domain range for column triagecode is checked.</span></a>
<a class="sourceLine" id="cb26-5" title="5"><span class="co">#&gt; Values allowed between 1 and 5</span></a>
<a class="sourceLine" id="cb26-6" title="6"><span class="co">#&gt; The values fall within the specified domain range for 45 (84.91%) of the rows in the activity log and outside the domain range for 8 (15.09%) of these rows.</span></a>
<a class="sourceLine" id="cb26-7" title="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb26-8" title="8"><span class="co">#&gt; The following rows fall outside the specified domain range for indicated column:</span></a>
<a class="sourceLine" id="cb26-9" title="9"><span class="co">#&gt; Warning: Trying to compute distinct() for variables not found in the data:</span></a>
<a class="sourceLine" id="cb26-10" title="10"><span class="co">#&gt; - `case_id`, `cattr_triagecode`</span></a>
<a class="sourceLine" id="cb26-11" title="11"><span class="co">#&gt; This is an error, but only a warning is raised for compatibility reasons.</span></a>
<a class="sourceLine" id="cb26-12" title="12"><span class="co">#&gt; The operation will return the input unchanged.</span></a>
<a class="sourceLine" id="cb26-13" title="13"><span class="co">#&gt; # A tibble: 8 x 8</span></a>
<a class="sourceLine" id="cb26-14" title="14"><span class="co">#&gt;   column_checked patient_visit_nr activity originator start              </span></a>
<a class="sourceLine" id="cb26-15" title="15"><span class="co">#&gt;   &lt;chr&gt;                     &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dttm&gt;             </span></a>
<a class="sourceLine" id="cb26-16" title="16"><span class="co">#&gt; 1 triagecode                  510 Clinica~ Doctor 7   2017-11-20 11:35:01</span></a>
<a class="sourceLine" id="cb26-17" title="17"><span class="co">#&gt; 2 triagecode                  529 Treatme~ Doctor 1   2017-11-22 16:30:00</span></a>
<a class="sourceLine" id="cb26-18" title="18"><span class="co">#&gt; 3 triagecode                  530 Triage   Nurse 17   2017-11-22 18:00:00</span></a>
<a class="sourceLine" id="cb26-19" title="19"><span class="co">#&gt; 4 triagecode                  531 Triage   Nurse 17   2017-11-22 18:05:00</span></a>
<a class="sourceLine" id="cb26-20" title="20"><span class="co">#&gt; 5 triagecode                  532 Treatme~ Nurse 17   2017-11-22 18:15:00</span></a>
<a class="sourceLine" id="cb26-21" title="21"><span class="co">#&gt; 6 triagecode                  532 Treatme~ Doctor 7   2017-11-22 18:27:00</span></a>
<a class="sourceLine" id="cb26-22" title="22"><span class="co">#&gt; 7 triagecode                  533 0        &lt;NA&gt;       2017-11-22 18:35:00</span></a>
<a class="sourceLine" id="cb26-23" title="23"><span class="co">#&gt; 8 triagecode                  534 Registr~ &lt;NA&gt;       2017-11-22 18:35:00</span></a>
<a class="sourceLine" id="cb26-24" title="24"><span class="co">#&gt; # ... with 3 more variables: complete &lt;dttm&gt;, triagecode &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb26-25" title="25"><span class="co">#&gt; #   specialization &lt;chr&gt;</span></a></code></pre></div>
<p>Note that the test will always print output statistics.</p>
</div>
<div id="detect_duration_outliers" class="section level3">
<h3><code>detect_duration_outliers()</code></h3>
<p>This test checks if there are any activities with a deviating duration compared to the average. The bounds of when a duration is considered to be an outlier can be customized by the user.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">detect_duration_outliers</span>(hospital, <span class="st">&quot;Clinical exam&quot;</span> =<span class="st"> </span><span class="kw">duration_within</span>())</a>
<a class="sourceLine" id="cb27-2" title="2"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb27-3" title="3"><span class="co">#&gt; Outliers are detected for following activities</span></a>
<a class="sourceLine" id="cb27-4" title="4"><span class="co">#&gt; Clinical exam     Lower bound: 0      Upper bound: 64.46</span></a>
<a class="sourceLine" id="cb27-5" title="5"><span class="co">#&gt; A total of 0 is detected (0% of the activity executions)</span></a></code></pre></div>
<p>At this point, no outliers are detected. But say you are more sensitive to duration variance, then you can tweak the bounds by either hard-coding it or by altering the number of standard deviations used to calculate the bounds.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1"><span class="kw">detect_duration_outliers</span>(hospital,  <span class="st">&quot;Clinical exam&quot;</span> =<span class="st"> </span><span class="kw">duration_within</span>(<span class="dt">bound_sd =</span> <span class="dv">2</span>)) -&gt;<span class="st"> </span>anomalies</a>
<a class="sourceLine" id="cb28-2" title="2"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb28-3" title="3"><span class="co">#&gt; Outliers are detected for following activities</span></a>
<a class="sourceLine" id="cb28-4" title="4"><span class="co">#&gt; Clinical exam     Lower bound: 0      Upper bound: 46.67</span></a>
<a class="sourceLine" id="cb28-5" title="5"><span class="co">#&gt; A total of 1 is detected (1.89% of the activity executions)</span></a>
<a class="sourceLine" id="cb28-6" title="6"><span class="co">#&gt; For the following activity instances, outliers are detected:</span></a>
<a class="sourceLine" id="cb28-7" title="7">anomalies</a>
<a class="sourceLine" id="cb28-8" title="8"><span class="co">#&gt; # A tibble: 1 x 13</span></a>
<a class="sourceLine" id="cb28-9" title="9"><span class="co">#&gt;   patient_visit_nr activity originator start               complete           </span></a>
<a class="sourceLine" id="cb28-10" title="10"><span class="co">#&gt;              &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dttm&gt;              &lt;dttm&gt;             </span></a>
<a class="sourceLine" id="cb28-11" title="11"><span class="co">#&gt; 1              535 Clinica~ Doctor 7   2017-11-22 14:28:31 2017-11-22 15:22:40</span></a>
<a class="sourceLine" id="cb28-12" title="12"><span class="co">#&gt; # ... with 8 more variables: triagecode &lt;dbl&gt;, specialization &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb28-13" title="13"><span class="co">#&gt; #   duration &lt;dbl&gt;, mean &lt;dbl&gt;, sd &lt;dbl&gt;, bound_sd &lt;dbl&gt;, lower_bound &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb28-14" title="14"><span class="co">#&gt; #   upper_bound &lt;dbl&gt;</span></a></code></pre></div>
<p>Assume that this line is entered by mistake. In that case, we can easily take the output from this assessment test to correct the hospital dataset. For this purpose, we provide you with <code>filter_anomalies()</code>.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" title="1"><span class="kw">filter_anomalies</span>(<span class="dt">activity_log =</span> hospital, <span class="dt">anomaly_log =</span> anomalies) -&gt;<span class="st"> </span>hospital</a>
<a class="sourceLine" id="cb29-2" title="2"><span class="co">#&gt; Joining, by = c(&quot;patient_visit_nr&quot;, &quot;activity&quot;, &quot;originator&quot;, &quot;start&quot;, &quot;complete&quot;, &quot;triagecode&quot;, &quot;specialization&quot;)</span></a></code></pre></div>
</div>
<div id="detect_case_id_sequence_gaps" class="section level3">
<h3><code>detect_case_id_sequence_gaps()</code></h3>
<p>In our toy dataset, the case identifier is a numeric attribute. Therefore, we can check if there are any cases missing in the sequence.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"><span class="kw">detect_case_id_sequence_gaps</span>(hospital)</a>
<a class="sourceLine" id="cb30-2" title="2"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb30-3" title="3"><span class="co">#&gt; It was checked whether there are gaps in the sequence of case IDs</span></a>
<a class="sourceLine" id="cb30-4" title="4"><span class="co">#&gt; From the 27 expected cases in the activity log, ranging from 510 to 536, 5 (18.52%) are missing.</span></a>
<a class="sourceLine" id="cb30-5" title="5"><span class="co">#&gt; These case numbers are:</span></a>
<a class="sourceLine" id="cb30-6" title="6"><span class="co">#&gt;   case present</span></a>
<a class="sourceLine" id="cb30-7" title="7"><span class="co">#&gt; 1  511   FALSE</span></a>
<a class="sourceLine" id="cb30-8" title="8"><span class="co">#&gt; 2  513   FALSE</span></a>
<a class="sourceLine" id="cb30-9" title="9"><span class="co">#&gt; 3  514   FALSE</span></a>
<a class="sourceLine" id="cb30-10" title="10"><span class="co">#&gt; 4  515   FALSE</span></a>
<a class="sourceLine" id="cb30-11" title="11"><span class="co">#&gt; 5  516   FALSE</span></a></code></pre></div>
<p>Note that this function can only be applied if the case numbering is unique to the business process under investigation.</p>
</div>
<div id="detect_related_activities" class="section level3">
<h3><code>detect_related_activities()</code></h3>
<p>Finally, we will demonstrate <code>detect_related_activities()</code>, where you can check if an activity is recorded for a case if another is present. This link is very clear between a treatment and its evaluation: a treatment can only be evaluated if a treatment was recorded in the first place.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" title="1"><span class="kw">detect_related_activities</span>(hospital, <span class="dt">antecedent =</span> <span class="st">&quot;Treatment evaluation&quot;</span>, <span class="dt">consequent =</span>  <span class="st">&quot;Treatment&quot;</span>)</a>
<a class="sourceLine" id="cb31-2" title="2"><span class="co">#&gt; *** OUTPUT ***</span></a>
<a class="sourceLine" id="cb31-3" title="3"><span class="co">#&gt; The following statement was checked: if Treatment evaluation is recorded for a case, then Treatment should also be recorded.</span></a>
<a class="sourceLine" id="cb31-4" title="4"><span class="co">#&gt; This statement holds for 5 (83.33%) of the cases in which Treatment evaluation was recorded and does not hold for 1 (16.67%) of the cases in which Treatment evaluation was recorded.</span></a>
<a class="sourceLine" id="cb31-5" title="5"><span class="co">#&gt; For the following cases, only Treatment evaluation is recorded:</span></a>
<a class="sourceLine" id="cb31-6" title="6"><span class="co">#&gt; [1] 529</span></a></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
